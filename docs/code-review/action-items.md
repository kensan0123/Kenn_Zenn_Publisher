# ğŸ¯ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ä¸€è¦§

**ä½œæˆæ—¥**: 2025-12-24
**å…ƒãƒ¬ãƒ“ãƒ¥ãƒ¼**: [2025-12-24-codebase-review.md](./2025-12-24-codebase-review.md)

---

## ğŸ“‹ ã‚¿ã‚¹ã‚¯ç®¡ç†

### ğŸ”´ é«˜å„ªå…ˆåº¦ï¼ˆã™ãã«ä¿®æ­£ã™ã¹ãï¼‰

- [ ] **#1: ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã®å±æ€§åã‚’çµ±ä¸€**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/exceptions/exceptions.py`
  - **å¯¾è±¡**: `SessionException`, `AgentException`
  - **ä½œæ¥­å†…å®¹**: privateå±æ€§ï¼ˆ`_message`, `_endpoint`, `_status_code`ï¼‰ã‚’publicå±æ€§ã«å¤‰æ›´
  - **å½±éŸ¿ç¯„å›²**: ä¾‹å¤–ã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ã„ã‚‹å…¨ç®‡æ‰€
  - **è¦‹ç©**: 15åˆ†

- [ ] **#2: `update_session()`ã®æ‰‹å‹•commitå‰Šé™¤**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/session/session_manager.py:77`
  - **ä½œæ¥­å†…å®¹**: `self._db.commit()`ã‚’å‰Šé™¤
  - **ç†ç”±**: ä¾å­˜æ€§æ³¨å…¥å´ã§è‡ªå‹•çš„ã«commitã•ã‚Œã‚‹ãŸã‚
  - **è¦‹ç©**: 5åˆ†

- [ ] **#3: ã‚¿ã‚¤ãƒä¿®æ­£ï¼š"requierd" â†’ "required"**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/core/settings.py:51`
  - **ä½œæ¥­å†…å®¹**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¹ãƒšãƒ«ä¿®æ­£
  - **è¦‹ç©**: 1åˆ†

- [ ] **#4: OpenAI APIå‘¼ã³å‡ºã—ã‚’ä¿®æ­£**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/zenn/generate.py:45`
  - **ä½œæ¥­å†…å®¹**:
    - `client.responses.create` â†’ `client.chat.completions.create`
    - `model="gpt-5-nano"` â†’ æœ‰åŠ¹ãªãƒ¢ãƒ‡ãƒ«åã«å¤‰æ›´
  - **è¦‹ç©**: 10åˆ†

---

### ğŸŸ¡ ä¸­å„ªå…ˆåº¦ï¼ˆè¨ˆç”»çš„ã«æ”¹å–„ï¼‰

- [ ] **#5: ãƒ‡ãƒãƒƒã‚°printæ–‡ã®å‰Šé™¤ãƒ»loggeråŒ–**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**:
    - `backend/agents/suggestion_agent.py:66-67`
    - `backend/agents/web_search_agent.py:33`
    - `backend/session/session_manager.py:68`
  - **ä½œæ¥­å†…å®¹**: `print()`ã‚’`logger.debug()`ã«ç½®ãæ›ãˆ
  - **è¦‹ç©**: 20åˆ†

- [ ] **#6: `SuggestSearvice` â†’ `SuggestService`ã«ãƒªãƒãƒ¼ãƒ **
  - **ãƒ•ã‚¡ã‚¤ãƒ«**:
    - `backend/services/suggest_service.py:14`
    - `backend/routers/suggest.py` (ã‚¤ãƒ³ãƒãƒ¼ãƒˆç®‡æ‰€)
  - **ä½œæ¥­å†…å®¹**: ã‚¯ãƒ©ã‚¹åã®ã‚¿ã‚¤ãƒä¿®æ­£
  - **è¦‹ç©**: 10åˆ†

- [ ] **#7: SQLAlchemy 2.0ã®`DeclarativeBase`ã«ç§»è¡Œ**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/models/session_model.py:5-7`
  - **ä½œæ¥­å†…å®¹**: `declarative_base()` â†’ `DeclarativeBase`
  - **è¦‹ç©**: 15åˆ†

- [ ] **#8: UUIDãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ **
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/session/session_manager.py:92-103`
  - **ä½œæ¥­å†…å®¹**: `check_db_by_session_id()`ã«UUIDå½¢å¼ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 
  - **è¦‹ç©**: 15åˆ†

- [ ] **#9: Model â†’ Schemaå¤‰æ›ã®ç°¡æ½”åŒ–**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/session/session_manager.py:46-54`
  - **ä½œæ¥­å†…å®¹**: `WritingSession(...)`ã‚’`WritingSession.model_validate()`ã«å¤‰æ›´
  - **è¦‹ç©**: 20åˆ†

---

### ğŸŸ¢ ä½å„ªå…ˆåº¦ï¼ˆä½™è£•ãŒã‚ã‚Œã°ï¼‰

- [ ] **#10: ã‚³ãƒ¼ãƒ‰å†…TODOã‚’GitHub Issuesã«ç§»è¡Œ**
  - **å¯¾è±¡ç®‡æ‰€**:
    - `session_manager.py:19` - "session id should created by pre layer"
    - `session_manager.py:45` - "is there a more simple code"
    - `suggest_service.py:13` - "complex roule each function"
    - `suggest_service.py:41` - "is this right to save session"
    - `session_manager.py:91` - "move to session service"
    - `session_model.py:17` - "invert to server_default"
  - **ä½œæ¥­å†…å®¹**: GitHub Issuesã¨ã—ã¦ç™»éŒ²ã—ã€ã‚³ãƒ¼ãƒ‰å†…ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‰Šé™¤
  - **è¦‹ç©**: 30åˆ†

- [ ] **#11: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³æ”¹å–„**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/core/database.py:38-48`
  - **ä½œæ¥­å†…å®¹**: `try-except-else-finally`ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¤‰æ›´
  - **è¦‹ç©**: 15åˆ†

- [ ] **#12: APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘½åã®çµ±ä¸€**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/routers/suggest.py:14`
  - **ä½œæ¥­å†…å®¹**: `/assist` â†’ `/suggest`ã«å¤‰æ›´ï¼ˆã¾ãŸã¯é€†ï¼‰
  - **å½±éŸ¿ç¯„å›²**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã€APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - **è¦‹ç©**: 20åˆ†

- [ ] **#13: ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã®å®šæ•°åŒ–**
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/agents/suggestion_agent.py:35`
  - **ä½œæ¥­å†…å®¹**: `max_tokens=1000`ã‚’å®šæ•°`MAX_TOKENS_SUGGESTION`ã¨ã—ã¦å®šç¾©
  - **è¦‹ç©**: 10åˆ†

- [ ] **#14: FastAPI Lifespanã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¿½åŠ **
  - **ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/main.py:12-16`
  - **ä½œæ¥­å†…å®¹**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šå¤±æ•—æ™‚ã®try-exceptã‚’è¿½åŠ 
  - **è¦‹ç©**: 10åˆ†

- [ ] **#15: ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®è¿½åŠ **
  - **ä½œæ¥­å†…å®¹**: pytestã‚’ä½¿ã£ãŸå˜ä½“ãƒ†ã‚¹ãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè£…
  - **è¦‹ç©**: æ•°æ™‚é–“ã€œæ•°æ—¥

- [ ] **#16: APIè¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä½œæˆ**
  - **ä½œæ¥­å†…å®¹**: OpenAPI/Swaggerä»•æ§˜ã®è©³ç´°åŒ–
  - **è¦‹ç©**: 1-2æ™‚é–“

- [ ] **#17: FastAPIã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®è¿½åŠ **
  - **ä½œæ¥­å†…å®¹**: ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ç”¨ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…
  - **è¦‹ç©**: 30åˆ†

---

## ğŸ“Š é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

| å„ªå…ˆåº¦ | å®Œäº† / ç·æ•° | é€²æ—ç‡ |
|--------|------------|--------|
| ğŸ”´ é«˜   | 0 / 4      | 0%     |
| ğŸŸ¡ ä¸­   | 0 / 5      | 0%     |
| ğŸŸ¢ ä½   | 0 / 8      | 0%     |
| **åˆè¨ˆ** | **0 / 17** | **0%** |

---

## ğŸ’¡ å®Ÿæ–½é †åºã®æ¨å¥¨

### Phase 1: ã‚¯ã‚¤ãƒƒã‚¯ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆ30åˆ†ï¼‰
1. #3: ã‚¿ã‚¤ãƒä¿®æ­£
2. #2: commitå‰Šé™¤
3. #1: ä¾‹å¤–å±æ€§çµ±ä¸€

### Phase 2: ã‚³ãƒ¼ãƒ‰å“è³ªæ”¹å–„ï¼ˆ1-2æ™‚é–“ï¼‰
4. #4: OpenAI APIä¿®æ­£
5. #5: loggeråŒ–
6. #6: ã‚¯ãƒ©ã‚¹åä¿®æ­£

### Phase 3: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„ï¼ˆ1-2æ™‚é–“ï¼‰
7. #7: SQLAlchemy 2.0ç§»è¡Œ
8. #8: UUIDãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
9. #9: Modelå¤‰æ›ç°¡æ½”åŒ–

### Phase 4: é•·æœŸçš„æ”¹å–„ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
10. ãã®ä»–ã®ä½å„ªå…ˆåº¦ã‚¿ã‚¹ã‚¯

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆä¿®æ­£æ™‚ï¼‰

å„ã‚¿ã‚¹ã‚¯å®Œäº†æ™‚ã«ä»¥ä¸‹ã‚’ç¢ºèªï¼š

- [ ] ã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£ãŒå®Œäº†
- [ ] Ruff lintãŒãƒ‘ã‚¹ï¼ˆ`ruff check backend/`ï¼‰
- [ ] Ruff formatãŒãƒ‘ã‚¹ï¼ˆ`ruff format backend/`ï¼‰
- [ ] å¤‰æ›´ç®‡æ‰€ã®å‹•ä½œç¢ºèª
- [ ] é–¢é€£ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ›´æ–°
- [ ] ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ˜ç¢º
- [ ] PRã®ä½œæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

---

**å‚™è€ƒ**: ã“ã®ãƒªã‚¹ãƒˆã¯å„ªå…ˆåº¦é †ã«å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚é«˜å„ªå…ˆåº¦ã‚¿ã‚¹ã‚¯ã¯å¯èƒ½ãªé™ã‚Šæ—©ãå¯¾å¿œã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
